{%- doc -%}
  Renders the mobile header drawer navigation.
  
  @param {string} [class] - Additional CSS classes for the drawer.
  @param {object} linklist - The main navigation menu linklist.
  @param {string} data_header_drawer_type - Data attribute for drawer type.
{%- enddoc -%}

{% liquid
  assign main_menu = linklists[linklist]
  if main_menu == blank
    assign main_menu = linklists['main-menu']
  endif
%}

<drawer-component
  class="header-drawer {{ class }}"
  {{ data_header_drawer_type | prepend: 'data-header-drawer-type="' | append: '"' }}
  data-breakpoint="mobile"
>
  <button
    type="button"
    class="header-drawer__toggle button button-unstyled"
    aria-controls="header-drawer-panel"
    aria-expanded="false"
    on:click="/toggleDrawer"
    ref="toggleButton"
  >
    <span class="header-drawer__toggle-icon">
      <span class="header-drawer__burger-line"></span>
      <span class="header-drawer__burger-line"></span>
      <span class="header-drawer__burger-line"></span>
    </span>
    <span class="visually-hidden">{{ 'accessibility.menu' | t }}</span>
  </button>

  <div
    id="header-drawer-panel"
    class="header-drawer__panel"
    ref="drawer"
    role="dialog"
    aria-modal="true"
    aria-labelledby="header-drawer-heading"
    tabindex="-1"
  >
    <div class="header-drawer__content">
      <!-- Header with close button -->
      <div class="header-drawer__header">
        <button
          type="button"
          class="header-drawer__close button button-unstyled"
          on:click="/closeDrawer"
          aria-label="{{ 'actions.close' | t }}"
        >
          <span class="svg-wrapper" aria-hidden="true">
            {{ 'icon-close.svg' | inline_asset_content }}
          </span>
        </button>
      </div>

      <!-- Welcome message -->
      <div class="header-drawer__welcome">
        <h2 id="header-drawer-heading" class="header-drawer__title">
          Welcome to<br>Burosys
        </h2>
      </div>

      <!-- Navigation menu -->
      <nav class="header-drawer__nav" role="navigation">
        <ul class="header-drawer__menu list-unstyled" role="list">
          {% for link in main_menu.links %}
            <li class="header-drawer__menu-item">
              {% if link.links != blank %}
                <details class="header-drawer__details">
                  <summary class="header-drawer__summary">
                    <span class="header-drawer__link-text">{{ link.title }}</span>
                    <span class="header-drawer__chevron" aria-hidden="true">
                      {{ 'icon-caret.svg' | inline_asset_content }}
                    </span>
                  </summary>
                  
                  <div class="header-drawer__submenu">
                    {% if link.title == 'Products' %}
                      <!-- Special handling for Products with category images -->
                      <div class="header-drawer__products-grid">
                        {% for child_link in link.links %}
                          {% if child_link.links != blank %}
                            {%- comment -%} Child link has its own children â€” render a details panel that opens a submenu with large image cards {%- endcomment -%}
                            <details class="header-drawer__product-details">
                              <summary class="header-drawer__product-category" data-has-subpanel="true">
                                {% if child_link.type == 'collection_link' and child_link.object.image %}
                                  <div class="header-drawer__category-image">
                                    <img src="{{ child_link.object.image | image_url: width: 240 }}" alt="{{ child_link.title }}" loading="lazy" width="119" height="119">
                                  </div>
                                {% elsif child_link.object.metafields.custom.header_image %}
                                  <div class="header-drawer__category-image">
                                    <img src="{{ child_link.object.metafields.custom.header_image | image_url: width: 240 }}" alt="{{ child_link.title }}" loading="lazy" width="119" height="119">
                                  </div>
                                {% else %}
                                  <div class="header-drawer__category-image header-drawer__category-image--placeholder">
                                    <span class="svg-wrapper" aria-hidden="true">{{ 'icon-search.svg' | inline_asset_content }}</span>
                                  </div>
                                {% endif %}
                                <span class="header-drawer__category-title">{{ child_link.title | upcase }}</span>
                              </summary>

                              <div class="header-drawer__product-subpanel">
                                {% for grand in child_link.links %}
                                  <a href="{{ grand.url }}" class="header-drawer__product-card">
                                    {% if grand.type == 'collection_link' and grand.object.image %}
                                      <img src="{{ grand.object.image | image_url: width: 1400 }}" alt="{{ grand.title }}" loading="lazy">
                                    {% elsif grand.object.metafields.custom.header_image %}
                                      <img src="{{ grand.object.metafields.custom.header_image | image_url: width: 1400 }}" alt="{{ grand.title }}" loading="lazy">
                                    {% else %}
                                      <div class="header-drawer__category-image header-drawer__category-image--placeholder">
                                        <span class="svg-wrapper" aria-hidden="true">{{ 'icon-search.svg' | inline_asset_content }}</span>
                                      </div>
                                    {% endif %}

                                    <div class="header-drawer__product-card-overlay" aria-hidden="true">
                                      <span class="header-drawer__product-card-parent">{{ child_link.title | upcase }}</span>
                                      <span class="header-drawer__product-card-title">{{ grand.title | upcase }}</span>
                                      <span class="header-drawer__product-card-cta">DISCOVER MORE</span>
                                    </div>
                                  </a>
                                {% endfor %}
                              </div>
                            </details>
                          {% else %}
                            {% if child_link.type == 'collection_link' %}
                              <a href="{{ child_link.url }}" class="header-drawer__product-category">
                                {% if child_link.object.image %}
                                  <div class="header-drawer__category-image">
                                    <img src="{{ child_link.object.image | image_url: width: 240 }}" alt="{{ child_link.object.title }}" loading="lazy" width="119" height="119">
                                  </div>
                                {% else %}
                                  <div class="header-drawer__category-image header-drawer__category-image--placeholder">
                                    <span class="svg-wrapper" aria-hidden="true">{{ 'icon-search.svg' | inline_asset_content }}</span>
                                  </div>
                                {% endif %}
                                <span class="header-drawer__category-title">{{ child_link.title | upcase }}</span>
                              </a>
                            {% else %}
                              <a href="{{ child_link.url }}" class="header-drawer__product-category">
                                {% if child_link.object.metafields.custom.header_image %}
                                  <div class="header-drawer__category-image">
                                    <img src="{{ child_link.object.metafields.custom.header_image | image_url: width: 240 }}" alt="{{ child_link.title }}" loading="lazy" width="119" height="119">
                                  </div>
                                {% else %}
                                  <div class="header-drawer__category-image header-drawer__category-image--placeholder">
                                    <span class="svg-wrapper" aria-hidden="true">{{ 'icon-search.svg' | inline_asset_content }}</span>
                                  </div>
                                {% endif %}
                                <span class="header-drawer__category-title">{{ child_link.title | upcase }}</span>
                              </a>
                            {% endif %}
                          {% endif %}
                        {% endfor %}
                      </div>
                    {% else %}
                      <!-- Regular submenu for other links -->
                      <ul class="header-drawer__submenu-list list-unstyled" role="list">
                        {% for child_link in link.links %}
                          <li class="header-drawer__submenu-item">
                            <a href="{{ child_link.url }}" class="header-drawer__submenu-link">
                              {{ child_link.title }}
                            </a>
                          </li>
                        {% endfor %}
                      </ul>
                    {% endif %}
                  </div>
                </details>
              {% else %}
                <a href="{{ link.url }}" class="header-drawer__link">
                  <span class="header-drawer__link-text">{{ link.title }}</span>
                </a>
              {% endif %}
            </li>
          {% endfor %}

          <!-- My Account Section -->

          <!-- Additional links from header actions -->
          {% if section.settings.stories_link != blank %}
            <li class="header-drawer__menu-item">
              <a href="{{ section.settings.stories_link }}" class="header-drawer__link">
                <span class="header-drawer__link-text">{{ section.settings.stories_label | default: 'Stories' }}</span>
              </a>
            </li>
          {% endif %}
          {% if section.settings.resources_link != blank %}
            <li class="header-drawer__menu-item">
              <a href="{{ section.settings.resources_link }}" class="header-drawer__link">
                <span class="header-drawer__link-text">{{ section.settings.resources_label | default: 'Resources' }}</span>
              </a>
            </li>
          {% endif %}

          <li class="header-drawer__menu-item">
            <details class="header-drawer__details">
              <summary class="header-drawer__summary">
                <span class="header-drawer__link-text">My Account</span>
                <span class="header-drawer__chevron" aria-hidden="true">
                  {{ 'icon-caret.svg' | inline_asset_content }}
                </span>
              </summary>
              
              <div class="header-drawer__submenu">
                <div class="header-drawer__account-content">
                  {% if customer %}
                    <!-- Logged in customer -->
                    <div class="header-drawer__account-header">
                      <span class="header-drawer__account-welcome">Hello</span>
                      {% if customer.email %}
                        <span class="header-drawer__account-email">{{ customer.email }} !</span>
                      {% elsif customer.phone %}
                        <span class="header-drawer__account-phone">{{ customer.phone }} !</span>
                      {% endif %}
                    </div>
                    
                    <ul class="header-drawer__account-links list-unstyled" role="list">
                      <li>
                        <a href="{{ routes.account_url }}" class="header-drawer__account-link">
                          <span class="svg-wrapper" aria-hidden="true">
                            {{ 'icon-account.svg' | inline_asset_content }}
                          </span>
                          My Account
                        </a>
                      </li>
                      <li>
                        <a href="#swym-wishlist" class="header-drawer__account-link">
                          <span class="svg-wrapper" aria-hidden="true">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <path d="M5 6.2C5 5.07989 5 4.51984 5.21799 4.09202C5.40973 3.71569 5.71569 3.40973 6.09202 3.21799C6.51984 3 7.07989 3 8.2 3H15.8C16.9201 3 17.4802 3 17.908 3.21799C18.2843 3.40973 18.5903 3.71569 18.782 4.09202C19 4.51984 19 5.07989 19 6.2V21L12 16L5 21V6.2Z" stroke="#00000066" stroke-width="2" stroke-linejoin="round"></path> </g></svg>
                          </span>
                          My Projects
                        </a>
                      </li>
                      <li>
                        <a href="{{ routes.cart_url }}" class="header-drawer__account-link">
                          <span class="svg-wrapper" aria-hidden="true">
                            {{ 'icon-cart.svg' | inline_asset_content }}
                          </span>
                          Cart
                          {% if cart.item_count > 0 %}
                            <span class="header-drawer__cart-count">({{ cart.item_count }})</span>
                          {% endif %}
                        </a>
                      </li>
                      <li>
                        <a href="{{ routes.account_logout_url }}" class="header-drawer__account-link">
                          <span class="svg-wrapper" aria-hidden="true">
                            {{ 'icon-account.svg' | inline_asset_content }}
                          </span>
                          Logout
                        </a>
                      </li>
                    </ul>
                  {% else %}
                    <!-- Guest user -->
                    <div class="header-drawer__account-header">
                      <span class="header-drawer__account-welcome">WELCOME TO BUROSYS!</span>
                    </div>
                    
                    <ul class="header-drawer__account-links list-unstyled" role="list">
                      <li>
                        <a 
                          href="{% if request.design_mode %}{{ routes.account_url }}{% else %}{{ routes.storefront_login_url }}{% endif %}" 
                          class="header-drawer__account-link"
                        >
                          <span class="svg-wrapper" aria-hidden="true">
                            {{ 'icon-account.svg' | inline_asset_content }}
                          </span>
                          Login
                        </a>
                      </li>
                      <li>
                        <a href="{{ routes.cart_url }}" class="header-drawer__account-link">
                          <span class="svg-wrapper" aria-hidden="true">
                            {{ 'icon-cart.svg' | inline_asset_content }}
                          </span>
                          Cart
                          {% if cart.item_count > 0 %}
                            <span class="header-drawer__cart-count">({{ cart.item_count }})</span>
                          {% endif %}
                        </a>
                      </li>
                    </ul>
                  {% endif %}
                </div>
              </div>
            </details>
          </li>
        </ul>
      </nav>

      <!-- Request Quote Button -->
      <div class="header-drawer__footer">
        <a 
          href="{{ pages.request-quote.url | default: '/pages/request-quote' }}" 
          class="header-drawer__request-quote button button-primary"
        >
          REQUEST QUOTE
        </a>
      </div>
      
        <!-- Product submenu full panel (hidden by default) -->
        <div class="header-drawer__product-panel" aria-hidden="true">
          <div class="header-drawer__product-panel-header">
            <button type="button" class="header-drawer__product-panel-back button button-unstyled" aria-label="Back">
              <span class="menu__heading__toggle svg-wrapper icon-chevron icon-animated">
                {{- 'icon-chevron-left.svg' | inline_asset_content -}}
              </span>
              <span class="header-drawer__product-panel-back-text">Back</span>
            </button>
          </div>

          <div class="header-drawer__product-panel-content"></div>

          <div class="header-drawer__product-panel-footer">
            <a href="{{ pages.request-quote.url | default: '/pages/request-quote' }}" class="header-drawer__request-quote button button-primary">
              REQUEST QUOTE
            </a>
          </div>
        </div>
    </div>

    <!-- Overlay -->
    <div class="header-drawer__overlay" on:click="/closeDrawer"></div>
  </div>
</drawer-component>

<script type="module">
  class DrawerComponent extends HTMLElement {
    constructor() {
      super();
      this.toggleButton = this.querySelector('[ref="toggleButton"]');
      this.drawer = this.querySelector('[ref="drawer"]');
      this.closeButtons = this.querySelectorAll('[on\\:click="/closeDrawer"]');
      
      this.init();
    }

    init() {
      this.toggleButton?.addEventListener('click', () => this.toggleDrawer());
      this.closeButtons.forEach(button => {
        button.addEventListener('click', () => this.closeDrawer());
      });
      
      // Close on escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && this.drawer.classList.contains('header-drawer__panel--open')) {
          this.closeDrawer();
        }
      });

      // Prevent body scroll when drawer is open
      this.drawer.addEventListener('transitionstart', () => {
        if (this.drawer.classList.contains('header-drawer__panel--open')) {
          document.body.style.overflow = 'hidden';
        }
      });

      this.drawer.addEventListener('transitionend', () => {
        if (!this.drawer.classList.contains('header-drawer__panel--open')) {
          document.body.style.overflow = '';
        }
      });

      // Product subpanel wiring
      this.productPanel = this.querySelector('.header-drawer__product-panel');
      this.productPanelContent = this.productPanel?.querySelector('.header-drawer__product-panel-content');
      this.productPanelBack = this.productPanel?.querySelector('.header-drawer__product-panel-back');

      if (this.productPanelBack) {
        this.productPanelBack.addEventListener('click', () => this.closeProductPanel());
      }

      // Attach open handlers to categories that have subpanels
      const triggers = this.querySelectorAll('[data-has-subpanel]');
      triggers.forEach(trigger => {
        trigger.addEventListener('click', (e) => {
          // Prevent native details toggle; open custom panel instead
          e.preventDefault();
          const details = trigger.closest('.header-drawer__product-details');
          const subpanel = details?.querySelector('.header-drawer__product-subpanel');
          if (subpanel && this.productPanel && this.productPanelContent) {
            this.openProductPanel(subpanel.innerHTML, trigger);
          }
        });
      });
    }

    toggleDrawer() {
      if (this.drawer.classList.contains('header-drawer__panel--open')) {
        this.closeDrawer();
      } else {
        this.openDrawer();
      }
    }

    openDrawer() {
      this.drawer.classList.add('header-drawer__panel--open');
      this.toggleButton.setAttribute('aria-expanded', 'true');
      
      // Focus the drawer for accessibility
      setTimeout(() => {
        this.drawer.focus();
      }, 100);
    }

    openProductPanel(html, triggerElement) {
      if (!this.productPanel) return;
      this.productPanelContent.innerHTML = html;
      this.productPanel.classList.add('header-drawer__product-panel--open');
      this.productPanel.setAttribute('aria-hidden', 'false');
      // Hide primary nav for screen readers
      this.querySelector('.header-drawer__nav')?.setAttribute('aria-hidden', 'true');
      // focus to panel
      setTimeout(() => {
        this.productPanel.querySelector('.header-drawer__product-panel-back')?.focus();
      }, 80);
      this._lastTrigger = triggerElement;
    }

    closeProductPanel() {
      if (!this.productPanel) return;
      this.productPanel.classList.remove('header-drawer__product-panel--open');
      this.productPanel.setAttribute('aria-hidden', 'true');
      this.querySelector('.header-drawer__nav')?.removeAttribute('aria-hidden');
      // return focus to last trigger if available
      if (this._lastTrigger) this._lastTrigger.focus();
    }

    closeDrawer() {
      this.drawer.classList.remove('header-drawer__panel--open');
      this.toggleButton.setAttribute('aria-expanded', 'false');
      
      // Return focus to toggle button
      this.toggleButton.focus();
    }
  }

  if (!customElements.get('drawer-component')) {
    customElements.define('drawer-component', DrawerComponent);
  }
</script>

{% stylesheet %}
  .header-drawer {
    display: block;
  }

  .header-drawer__account-header{
    display: flex;
    align-items: baseline;
    gap: 5px;
  }

  .header-drawer__toggle {
    padding: var(--padding-sm);
    cursor: pointer;
    background: transparent;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .header-drawer__toggle-icon {
    display: flex;
    flex-direction: column;
    width: 20px;
    height: 14px;
    position: relative;
  }

  .header-drawer__burger-line {
    display: block;
    height: 2px;
    width: 100%;
    background: var(--color-foreground);
    margin-bottom: 4px;
    transition: all 0.3s ease;
  }

  .header-drawer__burger-line:last-child {
    margin-bottom: 0;
  }

  .header-drawer__panel {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 1000;
    display: flex;
    transform: translateX(-100%);
    transition: transform 0.3s ease-in-out;
    pointer-events: none;
  }

  .header-drawer__panel--open {
    transform: translateX(0);
    pointer-events: auto;
  }

  .header-drawer__content {
    width: 100%;
    max-width: 400px;
    height: 100%;
    background: var(--color-background);
    display: flex;
    flex-direction: column;
    overflow-y: auto;
    position: relative;
    z-index: 2;
  }

  .header-drawer__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    cursor: pointer;
    z-index: 1;
  }

  .header-drawer__header {
    display: flex;
    justify-content: flex-start;
    padding: var(--padding-md);
  }

  .header-drawer__close {
    padding: var(--padding-sm);
    background: transparent;
    border: none;
    cursor: pointer;
  }

  .header-drawer__close .svg-wrapper {
    width: 20px !important;
    transform: rotate(90deg) !important;
    height: 20px !important;
    color: var(--color-foreground);
  }

  .header-drawer__welcome {
    padding: 5px 16px;
    text-align: left;
  }

  .header-drawer__title {
    font-size: 32px;
    font-weight: 300;
    line-height: 1.2;
    color: #838383;
    margin: 0;
    font-family: 'matter-light';
  }

  .header-drawer__nav {
    flex: 1;
    padding: 0 var(--padding-lg);
  }

  .header-drawer__menu {
    margin: 0;
    padding: 0;
  }

  .header-drawer__menu-item {
    border-bottom: 1px solid rgb(var(--color-foreground-rgb) / 0.1);
  }

  .header-drawer__menu-item:last-child {
    border-bottom: none;
  }

  .header-drawer__link,
  .header-drawer__summary {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--padding-md) 0;
    color: var(--color-foreground);
    text-decoration: none;
    font-size: var(--font-size--md);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    background: transparent;
    border: none;
    width: 100%;
    text-align: left;
  }

  .header-drawer__summary {
    list-style: none;
  }

  .header-drawer__summary::-webkit-details-marker {
    display: none;
  }

  .header-drawer__link-text {
    flex: 1;
  }

  .header-drawer__chevron {
    width: 16px;
    height: 16px;
    color: var(--color-foreground);
    transition: transform 0.3s ease;
  }

  .header-drawer__details[open] .header-drawer__chevron {
    transform: rotate(180deg);
  }

  .header-drawer__submenu {
    overflow: hidden;
  }

  .header-drawer__products-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--padding-sm);
    padding: var(--padding-md) 0;
  }

  @media screen and (max-width: 380px) {
    .header-drawer__products-grid {
      grid-template-columns: repeat(2, 1fr);
    }

  }

  .header-drawer__product-category {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
  }

  .header-drawer__category-image {
    width: 119px;
    height: 119px;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: var(--padding-xs);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .header-drawer__category-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .header-drawer__category-image--placeholder .svg-wrapper {
    width: 24px;
    height: 24px;
    color: rgb(var(--color-foreground-rgb) / 0.3);
  }

  .header-drawer__category-title {
    font-size: 9px;
    font-weight: 500;
    text-align: center;
    color: var(--color-foreground);
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .header-drawer__submenu-list {
    padding: var(--padding-md) 0;
    margin: 0;
  }

  .header-drawer__submenu-item {
    border-bottom: 1px solid rgb(var(--color-foreground-rgb) / 0.05);
  }

  .header-drawer__submenu-item:last-child {
    border-bottom: none;
  }

  .header-drawer__submenu-link {
    display: block;
    padding: var(--padding-sm) var(--padding-md);
    color: rgb(var(--color-foreground-rgb) / 0.8);
    text-decoration: none;
    font-size: var(--font-size--sm);
  }

  .header-drawer__submenu-link:hover {
    color: var(--color-foreground);
    background: rgb(var(--color-foreground-rgb) / 0.03);
  }

  .header-drawer__account-content {
    padding: 0;
  }

  .header-drawer__account-welcome {
    font-size: var(--font-size--md);
    font-weight: var(--font-weight-medium);
    color: var(--color-foreground);
  }

  .header-drawer__account-email,
  .header-drawer__account-phone {
    display: block;
    font-size: var(--font-size--sm);
    color: rgb(var(--color-foreground-rgb) / 0.7);
    margin-top: var(--padding-xs);
  }

  .header-drawer__account-links {
    margin: 0;
    padding: 0;
  }

  .header-drawer__account-link {
    display: flex;
    align-items: center;
    padding: var(--padding-sm) 0;
    color: var(--color-foreground);
    text-decoration: none;
    font-size: var(--font-size--sm);
    border-bottom: 1px solid rgb(var(--color-foreground-rgb) / 0.05);
  }

  .header-drawer__account-link:last-child {
    border-bottom: none;
  }

  .header-drawer__account-link .svg-wrapper {
    width: 18px;
    height: 18px;
    margin-right: var(--padding-sm);
    color: rgb(var(--color-foreground-rgb) / 0.6);
  }

  .header-drawer__cart-count {
    margin-left: var(--padding-xs);
    color: rgb(var(--color-foreground-rgb) / 0.6);
  }

  .header-drawer__footer {
    padding: var(--padding-lg);
    border-top: 1px solid rgb(var(--color-foreground-rgb) / 0.1);
    margin-top: auto;
  }

  .header-drawer__request-quote {
    width: 100%;
    padding: var(--padding-md);
    text-align: center;
    font-weight: var(--font-weight-medium);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    border-radius: var(--border-radius);
  }

  /* Animation for details/summary */
  .header-drawer__details {
    overflow: hidden;
  }

  .header-drawer__submenu {
    animation: slideDown 0.3s ease-out;
  }

  /* Hide inline product subpanels by default to avoid revealing off-canvas content */
  .header-drawer__product-subpanel {
    display: none;
  }

  /* If the details element is explicitly opened, show subpanel (keeps native behavior intact) */
  .header-drawer__product-details[open] .header-drawer__product-subpanel {
    display: block;
  }

  /* Prevent transformed off-canvas panels from causing horizontal scroll */
  .header-drawer__panel,
  .header-drawer__content {
    overflow-x: hidden;
  }

  /* Product panel (full submenu drawer inside header drawer) */
  .header-drawer__product-panel {
    position: absolute;
    inset: 0 0 0 0;
    background: var(--color-background);
    z-index: 3;
    transform: translateX(100%);
    transition: transform 0.28s ease-in-out;
    display: flex;
    flex-direction: column;
    padding: var(--padding-md);
    pointer-events: none;
  }

  .header-drawer__product-panel--open {
    transform: translateX(0);
    pointer-events: auto;
  }

  .header-drawer__product-panel-header {
    display: flex;
    align-items: center;
    padding: 10px 0;
  }



  .header-drawer__product-panel-back {
    display: flex;
    align-items: center;
    gap: var(--padding-xs);
    color: #00000066;
    font-size: 16px;
  }

  .header-drawer__product-panel-back .svg-wrapper {
        width: 0.4rem;
        height: 0.5rem;
        pointer-events: none;
        transform: translateY(2px);
  }

  .header-drawer__product-panel-content {
    margin: auto 0;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--padding-md);
    overflow-y: auto;
    padding-bottom: var(--padding-lg);
  }

  .header-drawer__product-card {
    display: block;
    width: 100%;
    height: 200px;
    border-radius: 12px;
    overflow: hidden;
    position: relative;
  }

  .header-drawer__product-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .header-drawer__product-card-overlay {
    position: absolute;
    inset: 0;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: white;
    text-align: center;
    background: linear-gradient(180deg, rgba(0,0,0,0.15) 0%, rgba(0,0,0,0.45) 100%);
    padding: var(--padding-md);
  }

  .header-drawer__product-card-parent {
    font-size: var(--font-size--xs);
    letter-spacing: 2px;
    margin-bottom: var(--padding-xs);
  }

  .header-drawer__product-card-title {
    font-size: 32px;
    font-family: 'britney' !important;
    text-transform: capitalize;
    margin-bottom: var(--padding-sm);
  }

  .header-drawer__product-card-cta {
    font-size: 12px;
    letter-spacing: 2px;

    margin-top: 60px;
  }

  @keyframes slideDown {
    from {
      max-height: 0;
      opacity: 0;
    }
    to {
      max-height: 500px;
      opacity: 1;
    }
  }

  /* Desktop hide */
  @media (min-width: 990px) {
    .header-drawer {
      display: none;
    }
  }
{% endstylesheet %}
